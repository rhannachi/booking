import Head from 'next/head'
import { NextPage } from 'next'
import { IRoom } from '@/shared/schemas'
import { CardProps } from '@/components/Organisms'
import { Layout } from '@/components/Templates'
import { roomCardMapper } from '@/containers/helpers/home.mapper'
import dynamic from 'next/dynamic'
import { Suspense } from 'react'

const Home = dynamic(() => import('@/components/Pages/Home'), {
  suspense: true
})

export type HomeContainerStateType = {
  isLoading: boolean
  error?: string
  rooms: IRoom[]
}
// export type HomeContainerDispatchType = {
//   setRoomsAction: typeof setRoomsAction
// }
type HomeContainerType = HomeContainerStateType

const HomeContainer: NextPage<HomeContainerType> = ({ isLoading, rooms = [] }) => {
  let cardListProps: CardProps[] = []

  if (!isLoading) {
    cardListProps = rooms.map(roomCardMapper)
  }

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <Layout>
          <Suspense fallback="Loading...">
            <Home cardList={cardListProps} />
          </Suspense>
        </Layout>
      </main>

      <footer></footer>
    </>
  )
}

export default HomeContainer
